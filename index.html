<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Passdown Pro v7</title>
<link rel="manifest" href="./manifest.webmanifest">
<link rel="stylesheet" href="./styles.css">
<meta name="theme-color" content="#0f172a">
</head>
<body>
<header>
  <h1 id="appTitle" title="Passdown Pro">Passdown Pro</h1>
  <div class="actions">
    <button id="btn-dark" title="Toggle theme">ðŸŒ™</button>
    <button id="btn-tip-manager" title="Manage safety tips">Tips</button>
    <button id="btn-settings">Settings</button>
    <button id="btn-copy-open">Copy & Open Slack</button>
    <button id="btn-export">Export Now</button>
  </div>
</header>

<main>
  <section class="grid">
    <label><span>Shift Group</span>
      <select id="shiftGroup">
        <option value="">Selectâ€¦</option>
        <option>Front Half Days</option><option>Front Half Nights</option>
        <option>Back Half Days</option><option>Back Half Nights</option>
      </select>
    </label>

    <label class="full"><span>Techs</span>
      <div class="picker">
        <input id="techSearch" placeholder="Search techsâ€¦">
        <div id="techList" class="list"></div>
      </div>
      <div id="techChips" class="chips"></div>
      <input id="techManual" placeholder="Add manual names (comma-separated)">
    </label>

    <label><span>Start of Shift TT</span><input id="startTT" placeholder="Topic or key point"></label>
    <label><span>End of Shift TT</span><input id="endTT" placeholder="Topic or reminder"></label>
    <label><span>Parts used</span><input id="partsUsed" placeholder="N/A"></label>
  </section>

  <section>
    <label><span id="safetyLabel">Safety Tip</span>
      <div class="row">
        <select id="tipMode"><option value="pro">Professional</option></select>
        <button id="btnRandomTip">Random Tip</button>
        <button id="btnAddTip">Add New Tip</button>
      </div>
      <textarea id="safetyTip" rows="2" placeholder="Click Random Tip or type your own"></textarea>
    </label>
  </section>

  <section>
    <label><span>Attach Photos (optional)</span>
      <div class="row">
        <input id="photoInput" type="file" accept="image/*" capture="environment" multiple>
        <button id="btnClearPhotos" type="button">Clear Photos</button>
      </div>
      <div id="photoPreview" class="preview-photos"></div>
    </label>
  </section>

  <section>
    <label><span>Shift Summary</span>
      <textarea id="summary" rows="4" placeholder="Essential only â€” what changed, what's pending, what needs eyes"></textarea>
    </label>
  </section>

  <section>
    <h3>Preview (Slack message)</h3>
    <pre id="preview"></pre>
    <div class="small" style="color:var(--muted);font-size:12px">Photos wonâ€™t paste with the text. Share them to Slack separately or include them in the weekly export.</div>
  </section>
</main>

<!-- Settings -->
<dialog id="dlg-settings"><form method="dialog">
  <h2>Settings</h2>
  <label><span>Slack Channel Note</span><input id="set-channelNote" value="#passdown"></label>
  <label><span>Reminder (minutes)</span><input id="set-reminder" type="number" min="0" value="120"></label>
  <label><span>Dark mode</span><select id="set-dark"><option value="auto">Auto</option><option value="light">Light</option><option value="dark">Dark</option></select></label>
  <menu><button value="cancel">Close</button><button id="btn-save-settings" value="default">Save</button></menu>
</form></dialog>

<!-- Tip manager -->
<dialog id="dlg-tips"><form method="dialog">
  <h2>Manage Safety Tips</h2>
  <div class="row">
    <select id="mgr-list"><option value="pro">Professional</option><option value="petty" class="hiddenPetty">Funny/Petty (Tech Mode)</option></select>
    <button id="mgr-export">Export</button>
    <label class="fileLabel">Import <input type="file" id="mgr-import" accept="application/json"></label>
  </div>
  <div id="mgr-items"></div>
  <div class="row"><input id="mgr-new" placeholder="New tipâ€¦"><button id="mgr-add">Add</button></div>
  <menu><button value="cancel">Close</button></menu>
</form></dialog>

<!-- Export dialog -->
<dialog id="dlg-export"><form method="dialog">
  <h2>Weekly Report (Preview)</h2>
  <input id="searchReport" placeholder="Search in reportâ€¦">
  <iframe id="reportFrame" title="Weekly Report" class="report"></iframe>
  <menu><button id="btn-download-report">Download</button><button value="cancel">Close</button></menu>
</form></dialog>

<script src="./app.js"></script>
<script>if('serviceWorker'in navigator){addEventListener('load',()=>navigator.serviceWorker.register('./service-worker.js'))}</script>
</body></html>
